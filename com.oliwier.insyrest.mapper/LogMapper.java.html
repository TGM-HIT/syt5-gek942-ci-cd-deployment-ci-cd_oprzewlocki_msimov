<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LogMapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">INSY-REST</a> &gt; <a href="index.source.html" class="el_package">com.oliwier.insyrest.mapper</a> &gt; <span class="el_source">LogMapper.java</span></div><h1>LogMapper.java</h1><pre class="source lang-java linenums">package com.oliwier.insyrest.mapper;

import com.oliwier.insyrest.dto.request.LogRequest;
import com.oliwier.insyrest.dto.response.LogResponse;
import com.oliwier.insyrest.entity.Analysis;
import com.oliwier.insyrest.entity.Log;
import com.oliwier.insyrest.entity.Sample;
import com.oliwier.insyrest.entity.id.SampleId;
import com.oliwier.insyrest.repository.AnalysisRepository;
import com.oliwier.insyrest.repository.SampleRepository;
import org.springframework.stereotype.Component;

@Component
public class LogMapper implements EntityMapper&lt;Log, LogRequest, LogResponse&gt; {

    private final SampleRepository sampleRepository;
    private final AnalysisRepository analysisRepository;

<span class="fc" id="L19">    public LogMapper(SampleRepository sampleRepository, AnalysisRepository analysisRepository) {</span>
<span class="fc" id="L20">        this.sampleRepository = sampleRepository;</span>
<span class="fc" id="L21">        this.analysisRepository = analysisRepository;</span>
<span class="fc" id="L22">    }</span>

    @Override
    public Log toEntity(LogRequest request) {
<span class="fc" id="L26">        Log log = new Log();</span>
<span class="fc" id="L27">        log.setDateCreated(request.getDateCreated());</span>
<span class="fc" id="L28">        log.setLevel(request.getLevel());</span>
<span class="fc" id="L29">        log.setInfo(request.getInfo());</span>
<span class="fc" id="L30">        log.setDateExported(request.getDateExported());</span>

        // Set sample reference if provided
<span class="pc bpc" id="L33" title="1 of 4 branches missed.">        if (request.getSId() != null &amp;&amp; request.getSStamp() != null) {</span>
<span class="fc" id="L34">            SampleId sampleId = new SampleId(request.getSId(), request.getSStamp());</span>
<span class="fc" id="L35">            Sample sample = sampleRepository.findById(sampleId).orElse(null);</span>
<span class="fc" id="L36">            log.setSample(sample);</span>
        }

        // Set analysis reference if provided
<span class="fc bfc" id="L40" title="All 2 branches covered.">        if (request.getAId() != null) {</span>
<span class="fc" id="L41">            Analysis analysis = analysisRepository.findById(request.getAId()).orElse(null);</span>
<span class="fc" id="L42">            log.setAnalysis(analysis);</span>
        }

<span class="fc" id="L45">        return log;</span>
    }

    @Override
    public LogResponse toResponse(Log entity) {
<span class="fc" id="L50">        LogResponse response = new LogResponse();</span>
<span class="fc" id="L51">        response.setLogId(entity.getLogId());</span>
<span class="fc" id="L52">        response.setDateCreated(entity.getDateCreated());</span>
<span class="fc" id="L53">        response.setLevel(entity.getLevel());</span>
<span class="fc" id="L54">        response.setInfo(entity.getInfo());</span>
<span class="fc" id="L55">        response.setDateExported(entity.getDateExported());</span>

<span class="fc bfc" id="L57" title="All 2 branches covered.">        if (entity.getSample() != null) {</span>
<span class="fc" id="L58">            response.setSId(entity.getSample().getId().getsId());</span>
<span class="fc" id="L59">            response.setSStamp(entity.getSample().getId().getsStamp());</span>
        }

<span class="fc bfc" id="L62" title="All 2 branches covered.">        if (entity.getAnalysis() != null) {</span>
<span class="fc" id="L63">            response.setAId(entity.getAnalysis().getAId());</span>
        }

<span class="fc" id="L66">        return response;</span>
    }

    @Override
    public void updateEntity(Log entity, LogRequest request) {
<span class="fc" id="L71">        entity.setDateCreated(request.getDateCreated());</span>
<span class="fc" id="L72">        entity.setLevel(request.getLevel());</span>
<span class="fc" id="L73">        entity.setInfo(request.getInfo());</span>
<span class="fc" id="L74">        entity.setDateExported(request.getDateExported());</span>

        // Update sample reference if provided
<span class="pc bpc" id="L77" title="2 of 4 branches missed.">        if (request.getSId() != null &amp;&amp; request.getSStamp() != null) {</span>
<span class="fc" id="L78">            SampleId sampleId = new SampleId(request.getSId(), request.getSStamp());</span>
<span class="fc" id="L79">            Sample sample = sampleRepository.findById(sampleId).orElse(null);</span>
<span class="fc" id="L80">            entity.setSample(sample);</span>
        }

        // Update analysis reference if provided
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">        if (request.getAId() != null) {</span>
<span class="fc" id="L85">            Analysis analysis = analysisRepository.findById(request.getAId()).orElse(null);</span>
<span class="fc" id="L86">            entity.setAnalysis(analysis);</span>
        }
<span class="fc" id="L88">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>